<!DOCTYPE html>
<html layout:decorate="layout"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>My Account</title>
    <link th:href="@{/css/my_account.css}" rel="stylesheet"/>
</head>
<body class="page-container" layout:fragment="content">
    <div class="myaccount-body">
        <div >
            <h1>My Account</h1>
        </div>
        <div>
            <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'Details')">Details</button>
                <button class="tablinks" onclick="openTab(event, 'Preferences')">Preferences</button>
                <button class="tablinks" onclick="openTab(event, 'Settings')">Settings</button>
            </div>
            <div id="Details" class="tabcontent">
                <div class="detail">
                    <strong>
                        <label for="username-detail">Username:</label>
                    </strong>
                    <p th:text="${member.username}" id="username-detail"></p>
                </div>
                <div class="detail" th:if="${member.email != null}">
                    <strong>
                        <label for="email-detail">Email:</label>
                    </strong>
                    <p th:text="${member.email}" id="email-detail"></p>
                </div>
                <div class="detail" th:if="${member.firstName != null}">
                    <strong>
                        <label for="first-name-detail">First Name:</label>
                    </strong>
                    <p th:text="${member.firstName}" id="first-name-detail"></p>
                </div>
                <div class="detail" th:if="${member.surname != null}">
                    <strong>
                        <label for="surname-detail">Surname:</label>
                    </strong>
                    <p th:text="${member.surname}" id="surname-detail"></p>
                </div>
                <div class="detail">
                    <strong>
                        <label for="member-id-detail">Member ID:</label>
                    </strong>
                    <p th:text="${member.id}" id="member-id-detail"></p>
                </div>
            </div>
            <div id="Preferences" class="tabcontent">
                <div class="detail">
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                         <p>Dark Mode</p>
                    </label>
                </div>
                <div class="detail">
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                        <p>Private Profile</p>
                    </label>
                </div>
                <div class="detail">
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                        <p>Keep me signed in</p>
                    </label>
                </div>
            </div>
            <div id="Settings" class="tabcontent">
                <div th:if="${isValid != null}">
                    <p th:if="${isValid}" th:text="${'Password Updated'}"></p>
                    <p th:if="${!isValid}" th:text="${'Please enter a valid password'}"></p>
                </div>
                <h1>Change password:</h1>
                <form id="password" action="#" method="POST" th:action="@{/members/myaccount/change-password}" th:object="${password}">
                    <div class="detail">
                        <label for="oldPassword">Old password</label>
                        <input required id="oldPassword" name="oldPassword" type="password">
                    </div>
                    <div class="detail">
                        <label for="newPassword">New password</label>
                        <input required id="newPassword" name="newPassword" type="password">
                    </div>
                    <div class="detail">
                        <input type="submit" value="Change Password">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="waves">
        <svg id="visual" viewBox="0 0 900 600" preserveAspectRatio="none" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"><path d="M0 145L21.5 138C43 131 86 117 128.8 113C171.7 109 214.3 115 257.2 131C300 147 343 173 385.8 182C428.7 191 471.3 183 514.2 169C557 155 600 135 642.8 138C685.7 141 728.3 167 771.2 177C814 187 857 181 878.5 178L900 175L900 0L878.5 0C857 0 814 0 771.2 0C728.3 0 685.7 0 642.8 0C600 0 557 0 514.2 0C471.3 0 428.7 0 385.8 0C343 0 300 0 257.2 0C214.3 0 171.7 0 128.8 0C86 0 43 0 21.5 0L0 0Z" fill="#1d77c3"></path><path d="M0 313L21.5 307C43 301 86 289 128.8 294C171.7 299 214.3 321 257.2 330C300 339 343 335 385.8 325C428.7 315 471.3 299 514.2 289C557 279 600 275 642.8 280C685.7 285 728.3 299 771.2 300C814 301 857 289 878.5 283L900 277L900 173L878.5 176C857 179 814 185 771.2 175C728.3 165 685.7 139 642.8 136C600 133 557 153 514.2 167C471.3 181 428.7 189 385.8 180C343 171 300 145 257.2 129C214.3 113 171.7 107 128.8 111C86 115 43 129 21.5 136L0 143Z" fill="#0e4e81"></path><path d="M0 379L21.5 373C43 367 86 355 128.8 361C171.7 367 214.3 391 257.2 397C300 403 343 391 385.8 380C428.7 369 471.3 359 514.2 351C557 343 600 337 642.8 339C685.7 341 728.3 351 771.2 352C814 353 857 345 878.5 341L900 337L900 275L878.5 281C857 287 814 299 771.2 298C728.3 297 685.7 283 642.8 278C600 273 557 277 514.2 287C471.3 297 428.7 313 385.8 323C343 333 300 337 257.2 328C214.3 319 171.7 297 128.8 292C86 287 43 299 21.5 305L0 311Z" fill="#062844"></path><path d="M0 433L21.5 435C43 437 86 441 128.8 448C171.7 455 214.3 465 257.2 472C300 479 343 483 385.8 480C428.7 477 471.3 467 514.2 461C557 455 600 453 642.8 462C685.7 471 728.3 491 771.2 492C814 493 857 475 878.5 466L900 457L900 335L878.5 339C857 343 814 351 771.2 350C728.3 349 685.7 339 642.8 337C600 335 557 341 514.2 349C471.3 357 428.7 367 385.8 378C343 389 300 401 257.2 395C214.3 389 171.7 365 128.8 359C86 353 43 365 21.5 371L0 377Z" fill="#062844"></path><path d="M0 499L21.5 501C43 503 86 507 128.8 514C171.7 521 214.3 531 257.2 536C300 541 343 541 385.8 538C428.7 535 471.3 529 514.2 521C557 513 600 503 642.8 508C685.7 513 728.3 533 771.2 541C814 549 857 545 878.5 543L900 541L900 455L878.5 464C857 473 814 491 771.2 490C728.3 489 685.7 469 642.8 460C600 451 557 453 514.2 459C471.3 465 428.7 475 385.8 478C343 481 300 477 257.2 470C214.3 463 171.7 453 128.8 446C86 439 43 435 21.5 433L0 431Z" fill="#0e4e81"></path><path d="M0 601L21.5 601C43 601 86 601 128.8 601C171.7 601 214.3 601 257.2 601C300 601 343 601 385.8 601C428.7 601 471.3 601 514.2 601C557 601 600 601 642.8 601C685.7 601 728.3 601 771.2 601C814 601 857 601 878.5 601L900 601L900 539L878.5 541C857 543 814 547 771.2 539C728.3 531 685.7 511 642.8 506C600 501 557 511 514.2 519C471.3 527 428.7 533 385.8 536C343 539 300 539 257.2 534C214.3 529 171.7 519 128.8 512C86 505 43 501 21.5 499L0 497Z" fill="#1d77c3"></path></svg>
    </div>
<script>
    function openTab(evt, tab) {
        // Declare all variables
        var tabcontent, tablinks;
        let tabElement = document.getElementById(tab);
        let mediaMatch = window.matchMedia("(max-width: 640px)");

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (let i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (let i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        if (tabElement.id == "Preferences") {
            tabElement.style.display = "flex";
            
            if (mediaMatch.matches) {
                tabElement.style.flexDirection = "column";
            } else {
                tabElement.style.flexDirection = "row";
            }
        } else {
            tabElement.style.display = "block";
        }
        

        evt.currentTarget.className += " active";
    }
</script>
</body>
</html>
